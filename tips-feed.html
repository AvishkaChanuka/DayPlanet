<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sustainable Tips - Tips Feed</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f7f7f7;
            color: #333;
        }
        .container {
            max-width: 900px;
            margin-top: 50px;
        }
        .card-body {
            background-color: #e3f2fd;
            border-radius: 10px;
            transition: transform 0.3s ease;
        }
        .card-body:hover {
            transform: scale(1.05);
        }
        .btn-success {
            background-color: #4caf50;
            border: none;
        }
        .btn-danger {
            background-color: #f44336;
            border: none;
        }
        .btn-success:hover, .btn-danger:hover {
            background-color: #45a049;
        }
        .card-title {
            font-weight: 600;
        }
        .card-text {
            font-size: 1.1em;
        }
        .card-header {
            background-color: #4caf50;
            color: white;
            font-size: 1.2em;
            font-weight: bold;
            text-align: center;
            padding: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="text-center mb-4">
            <h1>Explore Sustainable Tips</h1>
            <p class="lead">Here are the tips submitted by others. Let's make the world greener!</p>
        </div>

        <!-- Tips Section -->
        <div class="row" id="tipsContainer">
            <!-- Tips will be dynamically inserted here -->
        </div>
    </div>

    <script>
        window.onload = function() {
            let tips = JSON.parse(localStorage.getItem('tips')) || [];
            const tipsContainer = document.getElementById('tipsContainer');
            let likedTips = JSON.parse(localStorage.getItem('likedTips')) || [];

            // Check if tips exist in localStorage
            if (tips.length === 0) {
                tipsContainer.innerHTML = '<p>No tips available. Please submit some tips!</p>';
            } else {
                tips.forEach((tip, index) => {
                    const tipCard = document.createElement('div');
                    tipCard.classList.add('col-md-6', 'mb-4');
                    tipCard.innerHTML = `
                        <div class="card">
                            <div class="card-header">${tip.title}</div>
                            <div class="card-body">
                                <p class="card-text">${tip.description}</p>
                                <p class="card-text"><small class="text-muted">Posted on: ${tip.date}</small></p>
                                <p>Likes: <span id="likeCount-${index}">${tip.likes}</span></p>
                                <button class="btn btn-success btn-sm" id="likeBtn-${index}" onclick="likeTip(${index})">
                                    üëç Like
                                </button>
                                <button class="btn btn-danger btn-sm" id="deleteBtn-${index}" onclick="deleteTip(${index})">
                                    üóëÔ∏è Delete
                                </button>
                            </div>
                        </div>
                    `;
                    tipsContainer.appendChild(tipCard);

                    // Disable the like button if the tip is already liked by the user
                    if (likedTips.includes(index)) {
                        document.getElementById(`likeBtn-${index}`).disabled = true;
                        document.getElementById(`likeBtn-${index}`).innerText = 'Liked';
                    }
                });
            }
        }

        function likeTip(index) {
            let tips = JSON.parse(localStorage.getItem('tips')) || [];
            let likedTips = JSON.parse(localStorage.getItem('likedTips')) || [];

            // If the tip has not been liked before
            if (!likedTips.includes(index)) {
                // Increment like count in tips array
                tips[index].likes += 1;

                // Add index to likedTips to prevent liking again
                likedTips.push(index);

                // Save the updated data to localStorage
                localStorage.setItem('tips', JSON.stringify(tips));
                localStorage.setItem('likedTips', JSON.stringify(likedTips));

                // Update the like count on the page
                document.getElementById(`likeCount-${index}`).innerText = tips[index].likes;

                // Disable the like button and change text to 'Liked'
                const likeButton = document.getElementById(`likeBtn-${index}`);
                likeButton.disabled = true;
                likeButton.innerText = 'Liked';
            } else {
                alert('You have already liked this tip!');
            }
        }

        function deleteTip(index) {
            let tips = JSON.parse(localStorage.getItem('tips')) || [];
            tips.splice(index, 1);

            // Update the tips in localStorage
            localStorage.setItem('tips', JSON.stringify(tips));

            // Refresh the page to show updated tips list
            window.location.reload();
        }
    </script>
</body>
</html>


